{% extends 'base.html' %}

{% block header %}
<div class="page-header">
    <h1> Plan a study's return of results </h1>
</div>
{% endblock %}

{% block body %}
<div class= "basic-box">
<div class="flex-row">
<h1 class="planning-num" style="margin-top:15px">4</h1>
<h2 class="plan-3" style="margin-bottom:0px">Add each result for each visit:</h2>
</div>
<div id="planning-form" class="flex-row">
<div></div>

{% for visit in dict_visits %}

<form id="result-details" class="plan-3" action="/plan-study" method="POST">
    <h2 style="margin-top:20px; margin-bottom: 5px"> {{ visit }} </h2>
    <div class= "flex-row">
    {% for i in range(dict_visits[visit]) %}
    <div class="basic-box planning" id={{visit}}> 
        <br>
        <b>Test name:</b>
        <input type="text" name="{{visit}}-test{{i}}-test-name" required> 
        <br>

        Is there a possibility for this test result to be urgent?
        <br>
        <input type="radio" id="{{visit}}-urgency-potential" name="{{visit}}-test{{i}}-urgency-potential" value="yes" required>
            <label>Yes</label>
        <input type="radio" id="{{visit}}-urgency-potential" name="{{visit}}-test{{i}}-urgency-potential" value="no">
            <label>No</label><br>
        <br>

        How would you categorize this test result? <br>
        <input type="radio" id="{{visit}}-result_category" name="{{visit}}-test{{i}}-result_category" value="actionable" required>
        <label for="{{visit}}-result_category">Actionable</label>
        <input type="radio" id="{{visit}}-result_category" name="{{visit}}-test{{i}}-result_category" value="personally valuable">
        <label for="{{visit}}-result_category">Personally Valuable</label>
        <br>
        <input type="radio" id="{{visit}}-result_category" name="{{visit}}-test{{i}}-result_category" value="unknown implications">
        <label for="{{visit}}-result_category">Unknown Implications</label>
        <br>
        <br>
        Are you going to return this result?
        <br>
        <input type="radio" class="{{visit}}-test{{i}} return_plan" name="{{visit}}-test{{i}}-return_plan" value="yes" required>
            <label>Yes</label>
        <input type="radio" class="{{visit}}-test{{i}} return_plan" name="{{visit}}-test{{i}}-return_plan" value="no">
            <label>No</label><br>
        <br>
        
        <!-- should only display if the answer to above is "yes" -->
        <div id="return-timing" class="{{visit}}-test{{i}} return-timing">
            When are you going to return this result?     
            <br>
            <input type="radio" id="{{visit}}-test{{i}}-return_timing" name="{{visit}}-test{{i}}-return_timing" value="during">
                <label for="during">During the study</label>
            <input type="radio" id="{{visit}}-test{{i}}-return_timing"  name="{{visit}}-test{{i}}-return_timing" value="after">
                <label for="after">After the study</label>
            </div>
    </div>
    {% endfor %}
    <br><br>
    </div>
{% endfor %}

<div>
    <button class="button page-bottom-button" style="width: 95%" type=submit>Submit Plan & View Study</button>
</div>
    
</form>

</div>
</div>


{% endblock %}

{% block js %} 
<script src="/static/js/planning-form.js"></script>
{% endblock %}